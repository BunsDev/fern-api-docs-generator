openapi: 3.1.0
info:
  title: Test extension `x-fern-oauth`.
  version: 1.0.0
x-fern-oauth:
  flow: client-credentials
  clientId:
    name: username
    env: MY_CLIENT_ID
  clientSecret:
    name: password
    env: MY_CLIENT_ID
  tokenPrefix: Bearer
  getToken:
    endpoint: POST https://example.com/token
    request:
      clientId: $query.client_id
      clientSecret: $query.client_secret
      scopes: $query.scopes
    response:
      accessToken: $response.access_token
      refreshToken: $response.refresh_token
  refreshToken:
    endpoint: POST /refresh
    request:
      refreshToken: $query.refresh_token
    response:
      accessToken: $response.access_token
      refreshToken: $response.refresh_token
  scopes: ["scope1", "scope2"]

paths:
  "/refresh":
    post:
      x-fern-sdk-group-name: auth
      parameters:
        - schema:
            type: string
          in: query
          name: refresh_token
          required: true
      responses:
        '200':
          description: A real life token
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                  refreshToken:
                    type: string
                required:
                  - accessToken
                  - refreshToken
  "/token":
    post:
      x-fern-sdk-group-name: auth
      parameters:
        - schema:
            type: string
          in: query
          name: client_id
          required: true
        - schema:
            type: string
          in: query
          name: client_secret
          required: true
        - schema:
            type: string
          in: query
          name: scopes
          required: true
      responses:
        '200':
          description: A real life token
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                  refreshToken:
                    type: string
                required:
                  - accessToken
                  - refreshToken
components:
  securitySchemes:
    api_key:
      type: http
      scheme: bearer
