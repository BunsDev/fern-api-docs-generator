
irVersion: v53
publish:
  preBuildCommands:
    - ./.github/actions/install
    - pnpm --filter @fern-api/fern-csharp-sdk dist:cli
  docker: 
    file: ./generators/csharp/sdk/Dockerfile
    image: fernapi/fern-csharp-sdk
    context: .
test:
  docker:
    image: fernapi/fern-csharp-sdk:latest
    command: pnpm --filter @fern-api/fern-csharp-sdk dockerTagLatest
  local: 
    workingDirectory: generators/csharp
    buildCommand: 
      - pnpm --filter @fern-api/fern-csharp-sdk dist:cli
    runCommand: node sdk/dist/bundle.cjs

language: csharp
generatorType: SDK
defaultOutputMode: github
scripts:
  - docker: bitnami/dotnet-sdk:8
    commands:
      - dotnet build src -c Release /p:ContinuousIntegrationBuild=true
fixtures: 
  imdb:
    - customConfig: null
      outputFolder: no-custom-config
    - customConfig:
        extra-dependencies:
          Moq: 4.20.70
          Moq.Contrib.HttpClient: "1.4.0"
      outputFolder: extra-dependencies
    - customConfig:
        base-api-exception-class-name: CustomApiException
        base-exception-class-name: CustomException
      outputFolder: exception-class-names
  multi-url-environment:
    - customConfig:
        pascal-case-environments: false
      outputFolder: no-pascal-case-environments
  exhaustive:
    - customConfig:
        explicit-namespaces: true
      outputFolder: explicit-namespaces
    - customConfig:
        root-namespace-for-core-classes: false
      outputFolder: no-root-namespace-for-core-classes
    - customConfig:
        generate-error-types: false
      outputFolder: no-generate-error-types
  optional:
    - customConfig:
        simplify-object-dictionaries: false
      outputFolder: no-simplify-object-dictionaries
allowedFailures:
  - objects-with-imports
  - examples
  # TODO: Add support for recursive undiscriminated unions.
  - grpc
